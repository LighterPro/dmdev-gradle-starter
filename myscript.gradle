import java.time.LocalDate

tasks.register('first') {
    doLast { println("I'm first task") }
}

tasks.register('second') {
    dependsOn(first)
    finalizedBy(third)
    doLast {
        println("I'm second task")
    }
}

tasks.register('third') {
    doLast { println("I'm third task") }
}

tasks.register('fourth') {
    group = "lighterpro"
    dependsOn(second)
    doLast { println("I'm fourth task") }
}

gradle.taskGraph.whenReady { TaskExecutionGraph graph ->
    println("ğŸ«¡ğŸ«¡ğŸ«¡ğŸ«¡ Task graph start ğŸ«¡ğŸ«¡ğŸ«¡ğŸ«¡")
    graph.allTasks.each {
        println(" - ${it.name}")
    }
    println("ğŸ«¡ğŸ«¡ğŸ«¡ğŸ«¡ Task graph end ğŸ«¡ğŸ«¡ğŸ«¡ğŸ«¡")
}

gradle.taskGraph.beforeTask { Task task ->
    if (task.group == "lighterpro") {
        println("beforeTask callback, task $task")
    }
}

gradle.taskGraph.afterTask { Task task ->
    if (task.name == "first") {
        println("afterTask callback, task $task")
    }
}

project.defaultTasks("second")

ext {
    myname = "Dima"
    currentDate = LocalDate.now()
}

println("ğŸ‘—ğŸ‘—ğŸ‘—ğŸ‘— Properties test start ğŸ‘—ğŸ‘—ğŸ‘—ğŸ‘—")
println(project.ext.myname)
println(project.myname)
println(ext.myname)
println("ğŸ‘—ğŸ‘—ğŸ‘—ğŸ‘—ğŸ‘—ğŸ‘—ğŸ‘—ğŸ‘—")
println("Project properties:")
println(project.properties)
println("ğŸ‘—ğŸ‘—ğŸ‘—ğŸ‘—ğŸ‘—ğŸ‘—ğŸ‘—ğŸ‘—")
println("System properties:")
println(System.getProperty("sys.example"))
println("ğŸ‘—ğŸ‘—ğŸ‘—ğŸ‘— Properties test end ğŸ‘—ğŸ‘—ğŸ‘—ğŸ‘—")
